<html>

<head>
    <meta charset="UTF-8" />
    <title>Spiel</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <script src="phaser.js"></script>  
    <script type="text/javascript" src="game.js"></script>  
    <style type="text/css" href="style.css">
        html{
            padding: 0;
            margin: 0;
        }
        body{ 
            padding: 0;
            margin: 0;

        }
#main{
    width: 100%;
    height: 100vh;
    background-color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    margin:0;
    padding: 0;

}
#field {
    margin: 0;
    padding: 0;
    background: white;
/*    width: 1280px;*/
    width: 1000px;
    height: 600px;
    background-size: 1280px 600px;
    position: absolute;
}
 </style>
</head>

<body>
    <div id="main">
        <div id="field"></div>
    </div>
        <script type="text/javascript">
                var config = {
                    type: Phaser.AUTO,
                    width: 1000,
                    height: 600,
                    parent: "field",
                    physics: {
                        default: 'arcade',
                        arcade: {
                            gravity: {
                                y: 300
                            },
                            debug: false
                        }
                    },
                    scene: {
                        preload: preload,
                        create: create,
                        update: update
                    }
                };



                var game = new Phaser.Game(config);
                var skyfield;

                function preload() {
                    this.load.image('sky', 'assets/background.jpg');
                    this.load.image('ground', 'assets/platform.png');
                    this.load.image('star', 'assets/star.png');
                    this.load.spritesheet('dude',
                        'assets/dude.png', {
                            frameWidth: 32,
                            frameHeight: 48
                        }
                    );
                }

                function create() {

                    //HINTERGRUND

                    skyfield = this.add.image(0, 0,'sky');

                    //                        this.add.image(0, 0, 'sky').setOrigin(0, 0); //SETZT DAS BILD AUTOMATISCH IN DIE MITTE
                    //            this.add.image(400, 300, 'star'); //MUSS AUF EINE EBENE VOR DAS ERSTE BILD; DESWEGEN "ZWEITES" BILD

                    //PLATTFORM

                    platforms = this.physics.add.staticGroup();

                    platforms.create(400, 568, 'ground').setScale(3).refreshBody(); //DAMIT MAN AN DEN SEITEN NICHT RUNTERFÄLLT AM BODEN

                    platforms.create(500, 400, 'ground'); //POSITION VON DEN PLATFORMEN
                    platforms.create(50, 250, 'ground');
                    platforms.create(750, 150, 'ground');

                    //PLAYER

                    player = this.physics.add.sprite(300, 200, 'dude'); //POSTITION VON DER ER RUNTER FÄLLT

                    player.setBounce(0.2) //LEICHTER SPRUNG WIEDR HOCH
                    player.setCollideWorldBounds(true);
                    //            player.body.setGravityY(300)

                    this.physics.add.collider(player, platforms); // WENN ZWEI ELEMENTE SICH BERÜHREN DANN KOLLISTION; GEHT NICHT DURCH

                    this.anims.create({
                        key: 'left',
                        frames: this.anims.generateFrameNumbers('dude', {
                            start: 0,
                            end: 3 //FRAMES DIE GEZEIGT WERDEN SOLLEN
                        }),
                        frameRate: 10,
                        repeat: -1 // SAGT DASS ES EIN LOOP SEIN SOLL
                    });

                    this.anims.create({
                        key: 'turn',
                        frames: [{
                            key: 'dude',
                            frame: 4
                        }],
                        frameRate: 20
                    });

                    this.anims.create({
                        key: 'right',
                        frames: this.anims.generateFrameNumbers('dude', {
                            start: 5,
                            end: 8
                        }),
                        frameRate: 10,
                        repeat: -1
                    });


                    //TASTATUR

                    cursors = this.input.keyboard.createCursorKeys();
                }

                function update() {
                    
                  if (cursors.up.isDown && player.body.touching.down) {
                        player.setVelocityY(-300);

                        player.anims.play('left', true);
                    } else {
                        player.setVelocityX(0);

                       
                    }

                   
                }

            </script>    
      
</body>

</html>
